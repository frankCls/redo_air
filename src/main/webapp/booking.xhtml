
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">
<ui:composition template="/WEB-INF/template.xhtml">


	<ui:define name="pageTitle" value="#{msg['search.title']}" />
	<ui:define name="pageContent">

		<h:form id="form">
			<div class="col-md-4">
				<div class="form-horizontal">
					<h:panelGrid id="panel" columns="1" cellpadding="2" cellspacing="2">
						<h:panelGroup class="form-group">

							<h:outputLabel for="nameDepartureCountry"
								value="#{msg['search.depCountry']}" />

							<h:outputText id="nameDepartureCountry"
								value=": #{bookingBean.flightBean.flight.departureLocation.country}"
								style="font-weight:bold" />


							<h:outputLabel for="nameDepartureAirport"
								value="#{msg['search.depAirport']}" />

							<h:outputText id="nameDepartureAirport"
								value=": #{bookingBean.flightBean.flight.departureLocation.name}"
								style="font-weight:bold" />
						</h:panelGroup>
						<h:panelGroup class="form-group">

							<h:outputLabel for="nameArrivalCountry"
								value="#{msg['search.destCountry']}" />

							<h:outputText id="nameArrivalCountry"
								value=": #{bookingBean.flightBean.flight.destinationLocation.country}"
								style="font-weight:bold" />


							<h:outputLabel for="nameArrivalAirport"
								value="#{msg['search.destAirport']}" />

							<h:outputText id="nameArrivalAirport"
								value=": #{bookingBean.flightBean.flight.destinationLocation.name}"
								style="font-weight:bold" />
						</h:panelGroup>

					</h:panelGrid>

					<h:panelGroup class="form-group">
						<h:outputLabel for="CreditCardType" value="CreditCardType" />

						<h:selectOneMenu id="CreditCardType" class="form-control"
							valueChangeListener="#{bookingBean.selectOneMenuListener}"
							value="#{bookingBean.selectedCreditCardType}">

							<f:selectItems var="n" value="#{bookingBean.creditCardtypeList}"
								itemLabel="#{fn:replace(n.toLowerCase(),'_',' ')}" />
							<f:ajax event="change" render="priceTicket" />
							<f:ajax event="change" render="creditCardNumber" />
						</h:selectOneMenu>

						<h:outputLabel for="creditCardNumber" value="Credit Card number" />
						<h:inputText id="creditCardNumber"
							value="#{bookingBean.creditCardNumber}" class="form-control" />

						<h:outputLabel for="firstNamePayer" value="First name: " />
						<h:inputText id="firstNamePayer"
							value="#{bookingBean.payer.firstName}" class="form-control" />

						<h:outputLabel for="lastNamePayer" value="Last name: " />
						<h:inputText id="lastNamePayer"
							value="#{bookingBean.payer.lastName}" class="form-control" />

					</h:panelGroup>
				</div>
			</div>
			<div class="col-md-4">
				<div class="form-horizontal">
					<h:panelGroup class="form-group">
						<h:outputLabel for="priceTicket" value="#{msg['search.price']}:" />
						<h:outputText id="priceTicket"
							value="#{bookingBean.calculatePrice()}" />

					</h:panelGroup>
					<h:panelGroup id="flightTable">
						<div class="tb">
							<h:dataTable class="table" value="#{bookingBean.tickets}" var="t">
								<h:column>
									<f:facet name="header">
										<h:outputText value="Departure airport" />
									</f:facet>
									<h:outputText id="nameDepartureAirport"
										value="#{t.flight.departureLocation.name}"
										style="font-weight:bold" />

								</h:column>
								<h:column>
									<f:facet name="header">
										<h:outputText value="First name passenger" />
									</f:facet>
									<h:inputText id="firstNamePassenger"
										value="#{t.passenger.firstName}" class="form-control" />

								</h:column>
								<h:column>
									<f:facet name="header">
										<h:outputText value="Last name passenger" />
									</f:facet>
									<h:inputText id="lastNamePassenger"
										value="#{t.passenger.lastName}" class="form-control" />

								</h:column>
							</h:dataTable>
						</div>
					</h:panelGroup>
				</div>
			</div>
			<h:panelGroup class="form-group">
				<h:outputLabel for="bookBtn" value="" />
				<h:commandButton id="bookBtn" class="btn btn-default form-control"
					value="Save booking" action="#{bookingBean.saveBooking()}" />
			</h:panelGroup>
		</h:form>
	</ui:define>



</ui:composition>
</html>
