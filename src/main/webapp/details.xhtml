<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">
	<ui:define name="pageTitle">
		<div class="pageTitle">
			<h3>#{msg['details.title']}</h3>
		</div>
	</ui:define>
	<ui:define name="pageContent">
		<table class="table">
			<h:outputText
				value="#{msg['search.travelClass']}: #{fn:replace(flightBean.travelingClass.toString().toLowerCase(),'_',' ')}" />
			<tr>
				<th><h:outputText value="  " /></th>
				<th><h:outputText value="#{msg['search.dep']}" /></th>
				<th><h:outputText value="#{msg['search.dest']}" /></th>
			</tr>

			<tr>
				<td><h:outputText value="#{msg['details.region']}" /></td>
				<td><h:outputText
						value="#{flightBean.flightDetails.departureLocation.region}" /></td>
				<td><h:outputText
						value="#{flightBean.flightDetails.destinationLocation.region}" />
				</td>
			</tr>
			<tr>
				<td><h:outputText value="#{msg['details.country']}" /></td>
				<td><h:outputText
						value="#{flightBean.flightDetails.departureLocation.country}" />
				</td>
				<td><h:outputText
						value="#{flightBean.flightDetails.destinationLocation.country}" />
				</td>
			</tr>
			<tr>
				<td><h:outputText value="#{msg['details.city']}" /></td>
				<td><h:outputText
						value="#{flightBean.flightDetails.departureLocation.city}" /></td>
				<td><h:outputText
						value="#{flightBean.flightDetails.destinationLocation.city}" /></td>
			</tr>
			<tr>
				<td><h:outputText value="#{msg['details.airport']}" /></td>
				<td><h:outputText
						value="#{flightBean.flightDetails.departureLocation.name}" /></td>
				<td><h:outputText
						value="#{flightBean.flightDetails.destinationLocation.name}" /></td>
			</tr>
		</table>

		<table class="table">
			<tr>
				<td><h:outputText value="#{msg['details.date.local']}" /></td>
				<td><h:outputText
						value="#{flightBean.flightDetails.departureTime}">
						<f:convertDateTime type="date" pattern="dd-MM-yyyy"
							timeZone="#{flightBean.flightDetails.departureLocation.timezoneTz}" />
					</h:outputText></td>
				<td><h:outputText
						value="#{flightBean.calculateDestinationTime()}">
						<f:convertDateTime type="date" pattern="dd-MM-yyyy"
							timeZone="#{flightBean.flightDetails.destinationLocation.timezoneTz}" />
					</h:outputText></td>
			</tr>

			<tr>
				<td><h:outputText value="#{msg['details.time.local']}" /></td>
				<td><h:outputText
						value="#{flightBean.flightDetails.departureTime}">
						<f:convertDateTime type="date" pattern="HH:mm"
							timeZone="#{flightBean.flightDetails.departureLocation.timezoneTz}" />
					</h:outputText></td>
				<td><h:outputText
						value="#{flightBean.calculateDestinationTime()}">
						<f:convertDateTime type="date" pattern="HH:mm"
							timeZone="#{flightBean.flightDetails.destinationLocation.timezoneTz}" />
					</h:outputText></td>
			</tr>
		</table>
		<table class="table">
			<tr>
				<td><h:outputText value="#{msg['search.comp']}" /></td>
				<td><h:outputText
						value="#{flightBean.flightDetails.company.name} (#{flightBean.flightDetails.company.country})" /></td>
				<td><h:outputText value="  " /></td>
			</tr>
		</table>
		<table class="table">
			<h:panelGroup rendered="#{flightBean.renderEconomyPrice}">
				<tr>
					<td><h:outputText value="#{msg['details.price.ticket']}" /></td>
					<td><h:outputText
							value="#{flightBean.flightDetails.flightData.economyClass.pricing.calculatedPrice} €" />
					</td>
					<td></td>
				</tr>
			</h:panelGroup>
			<h:panelGroup rendered="#{flightBean.renderBusinessPrice}">
				<tr>
					<td><h:outputText value="#{msg['details.price.ticket']}" /></td>
					<td><h:outputText
							value="#{flightBean.flightDetails.flightData.businnessClass.pricing.calculatedPrice} €" />
					</td>
					<td></td>
				</tr>
			</h:panelGroup>
			<h:panelGroup rendered="#{flightBean.renderFirstClassPrice}">
				<tr>
					<td><h:outputText value="#{msg['details.price.ticket']}" /></td>
					<td><h:outputText
							value="#{flightBean.flightDetails.flightData.firstClass.pricing.calculatedPrice} €" />
					</td>
					<td></td>
				</tr>
			</h:panelGroup>

			<h:panelGroup rendered="#{flightBean.renderBusinessPrice}">
				<tr>
					<td><h:outputText value="#{msg['details.price.ticket']}" /></td>
					<td><h:outputText
							value="#{flightBean.flightDetails.flightData.businnessClass.pricing.calculatedPrice} €" />
					</td>
					<td></td>
				</tr>
			</h:panelGroup>
			<h:panelGroup rendered="#{flightBean.renderFirstClassPrice}">
				<tr>
					<td><h:outputText value="#{msg['details.price.ticket']}" /></td>
					<td><h:outputText
							value="#{flightBean.flightDetails.flightData.firstClass.pricing.calculatedPrice} €" />
					</td>
					<td></td>
				</tr>
			</h:panelGroup>
			<h:panelGroup>
				<tr>
					<td><h:outputText value="#{msg['search.tickets']}" /></td>
					<td><h:outputText value="#{flightBean.nrOfTickets}" /></td>
					<td></td>
				</tr>
			</h:panelGroup>
			<h:panelGroup rendered="#{flightBean.renderEconomyPrice}">
				<tr>
					<td><h:outputText value="#{msg['details.price.total']}" /></td>
					<td><h:outputText
							value="#{flightBean.flightDetails.flightData.economyClass.pricing.calculatedPrice*flightBean.nrOfTickets} €" />
					</td>
					<td></td>
				</tr>
			</h:panelGroup>
			<h:panelGroup rendered="#{flightBean.renderBusinessPrice}">
				<tr>
					<td><h:outputText value="#{msg['details.price.total']}" /></td>
					<td><h:outputText
							value="#{flightBean.flightDetails.flightData.businnessClass.pricing.calculatedPrice*flightBean.nrOfTickets} €" />
					</td>
					<td></td>
				</tr>
			</h:panelGroup>

			<h:panelGroup rendered="#{flightBean.renderFirstClassPrice}">
				<tr>
					<td><h:outputText value="#{msg['details.price.total']}" /></td>
					<td><h:outputText
							value="#{flightBean.flightDetails.flightData.firstClass.pricing.calculatedPrice*flightBean.nrOfTickets} €" />
					</td>
					<td></td>
				</tr>
			</h:panelGroup>

		</table>
		<!-- 	getting user timezone
		<h:form prependId="false" styleClass="invisible">
			
			<h:inputText id="timeZone" value="#{flightBean.timeOffSet}">
				<f:ajax event="change" execute="timeZone"/>
			</h:inputText>

		</h:form>
		<script type="text/javascript">		
		(function getTimeZone(){
			var timeZone=document.getElementById("j_idt121");
			var offset = new Date().getTimezoneOffset();
			console.log(offset);
			timeZone.innerHTML=offset;			
		})();		
		</script> -->
		<h:form>
			<h:commandButton class="btn btn-default"
				action="index.xhtml" immediate="true" value="#{msg['cancel']}" />
		</h:form>
		<h:form>
			<h:commandButton class="btn btn-default"
				action="#{flightBean.book()}" value="Book Now" />
		</h:form>
	</ui:define>
</ui:composition>

